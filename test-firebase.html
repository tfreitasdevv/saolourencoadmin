<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Firebase</title>
</head>
<body>
    <h1>Teste de Conectividade Firebase</h1>
    <div id="results"></div>
    <button onclick="testFirebase()">Testar Conex√£o</button>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="src/config/firebase-config.js"></script>

    <script>
        function log(message) {
            const results = document.getElementById('results');
            results.innerHTML += `<p>${message}</p>`;
            console.log(message);
        }

        async function testFirebase() {
            log('üîç Iniciando teste Firebase...');
            
            try {
                log('üì± Firebase app: ' + (firebase.app() ? 'Conectado' : 'N√£o conectado'));
                log('üóÑÔ∏è Firestore: ' + (db ? 'Dispon√≠vel' : 'N√£o dispon√≠vel'));
                
                log('üìä Testando consulta na cole√ß√£o "avisos"...');
                const avisosSnapshot = await db.collection('avisos').limit(1).get();
                log('‚úÖ Consulta avisos: ' + avisosSnapshot.size + ' documentos encontrados');
                
                log('üéµ Testando consulta na cole√ß√£o "avisos-musica"...');
                const avisosMusicaSnapshot = await db.collection('avisos-musica').limit(1).get();
                log('‚úÖ Consulta avisos-musica: ' + avisosMusicaSnapshot.size + ' documentos encontrados');
                
                log('üìã Listando todas as cole√ß√µes...');
                const collections = ['avisos', 'avisos-musica', 'clero', 'pastorais', 'horarios', 'capelas', 'musicas', 'usuarios', 'administradores'];
                
                for (const collection of collections) {
                    try {
                        const snapshot = await db.collection(collection).limit(1).get();
                        log(`üìÅ ${collection}: ${snapshot.size} documentos`);
                    } catch (error) {
                        log(`‚ùå ${collection}: Erro - ${error.message}`);
                    }
                }
                
            } catch (error) {
                log('‚ùå Erro no teste: ' + error.message);
                console.error('Erro completo:', error);
            }
        }
        
        // Auto executar teste ao carregar
        window.addEventListener('load', testFirebase);
    </script>
</body>
</html>
