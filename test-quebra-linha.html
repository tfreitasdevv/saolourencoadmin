<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Quebras de Linha</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-container { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        textarea { width: 100%; height: 100px; margin: 10px 0; }
        button { padding: 10px 20px; margin: 5px; }
        .result { background: #f0f0f0; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Teste de Conversão de Quebras de Linha</h1>
    
    <div class="test-container">
        <h3>Teste das Funções de Conversão</h3>
        <textarea id="inputText" placeholder="Digite um texto com quebras de linha (pressione Enter)&#10;Segunda linha&#10;Terceira linha"></textarea>
        <br>
        <button onclick="testConversion()">Testar Conversão</button>
        <button onclick="testRoundTrip()">Testar Ida e Volta</button>
        
        <div class="result">
            <strong>Texto Original:</strong>
            <div id="originalText"></div>
        </div>
        
        <div class="result">
            <strong>Convertido para Flutter (\\n):</strong>
            <div id="flutterText"></div>
        </div>
        
        <div class="result">
            <strong>Convertido de Volta:</strong>
            <div id="backText"></div>
        </div>
        
        <div class="result">
            <strong>Exibição nos Cards (espaços):</strong>
            <div id="cardText"></div>
        </div>
    </div>

    <script>
        // Copiar as funções do app.js
        function convertLineBreaksToFlutter(text) {
            return text.replace(/\n/g, '\\n');
        }

        function convertLineBreaksFromFlutter(text) {
            return text.replace(/\\n/g, '\n');
        }

        function convertLineBreaksToHTML(text) {
            return text.replace(/\\n/g, '<br>');
        }

        function testConversion() {
            const input = document.getElementById('inputText').value;
            const flutterFormat = convertLineBreaksToFlutter(input);
            const backToNormal = convertLineBreaksFromFlutter(flutterFormat);
            const cardFormat = flutterFormat.replace(/\\n/g, ' ');

            document.getElementById('originalText').textContent = input;
            document.getElementById('flutterText').textContent = flutterFormat;
            document.getElementById('backText').textContent = backToNormal;
            document.getElementById('cardText').textContent = cardFormat;
        }

        function testRoundTrip() {
            const input = document.getElementById('inputText').value;
            console.log('Original:', JSON.stringify(input));
            
            const step1 = convertLineBreaksToFlutter(input);
            console.log('Passo 1 - Para Flutter:', JSON.stringify(step1));
            
            const step2 = convertLineBreaksFromFlutter(step1);
            console.log('Passo 2 - De volta:', JSON.stringify(step2));
            
            const isEqual = input === step2;
            console.log('Ida e volta preserva dados:', isEqual);
            
            alert(`Teste ida e volta: ${isEqual ? 'SUCESSO' : 'FALHOU'}\nVerifique o console para detalhes.`);
        }

        // Preencher exemplo inicial
        window.addEventListener('load', () => {
            document.getElementById('inputText').value = 'Primeira linha\nSegunda linha\nTerceira linha\n\nQuinta linha após linha vazia';
            testConversion();
        });
    </script>
</body>
</html>
